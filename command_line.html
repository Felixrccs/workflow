
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Command line interface &#8212; workflow  documentation</title>
    
  <link href="_static/css/theme.css" rel="stylesheet">
  <link href="_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    
  <link rel="preload" as="script" href="_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx-book-theme.d59cb220de22ca1c485ebbdc042f0030.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="&lt;no title&gt;" href="command_line.automatic_docs.html" />
    <link rel="prev" title="Collisions" href="workflows.collisions.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="index.html">
      
      
      
      <h1 class="site-logo" id="site-title">workflow  documentation</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Contents:
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="install.html">
   Instalation
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="code_structure.html">
   Code structure
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="code_structure.configset.html">
     Input and output of atomic structures
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="code_structure.parallelisation.html">
     Automatic parallelization of tasks
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="operations.html">
   Operations
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="operations.calculators.html">
     Calculators in workflow
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="operations.generating_configs.html">
     Generating Configs
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="operations.selecting_configs.html">
     Selecting Configs
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="operations.gap_fitting.html">
     Multistage GAP fitting
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="operations.plots.html">
     Plots
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="operations.misc.html">
     Miscellaneous
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="workflows.html">
   Workflows
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="workflows.rss.html">
     How to do GAP-RSS
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="workflows.collisions.html">
     Collisions
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="current reference internal" href="#">
   Command line interface
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="simple">
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="examples.html">
   Examples
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="contributing.html">
   How to contribute
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="modules.html">
   API
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="wfl.html">
     wfl package
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
    <label for="toctree-checkbox-6">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="wfl.calculators.html">
       wfl.calculators package
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="wfl.cli.html">
       wfl.cli package
      </a>
     </li>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="wfl.fit.html">
       wfl.fit package
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
      <label for="toctree-checkbox-7">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="wfl.fit.modify_database.html">
         wfl.fit.modify_database package
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="wfl.generate_configs.html">
       wfl.generate_configs package
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="wfl.pipeline.html">
       wfl.pipeline package
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="wfl.plotting.html">
       wfl.plotting package
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="wfl.reactions_processing.html">
       wfl.reactions_processing package
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="wfl.select_configs.html">
       wfl.select_configs package
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="wfl.utils.html">
       wfl.utils package
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Theme by the <a href="https://ebp.jupyterbook.org">Executable Book Project</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="_sources/command_line.rst.txt"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.rst</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
                onclick="printPdf(this)" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#calculators">
   Calculators
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#orca-outdated">
     ORCA (outdated)
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#castep">
     CASTEP
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#vasp">
     VASP
    </a>
   </li>
  </ul>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Command line interface</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#calculators">
   Calculators
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#orca-outdated">
     ORCA (outdated)
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#castep">
     CASTEP
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#vasp">
     VASP
    </a>
   </li>
  </ul>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            
              <div>
                
  <div class="section" id="command-line-interface">
<span id="command-line"></span><h1>Command line interface<a class="headerlink" href="#command-line-interface" title="Permalink to this headline">¶</a></h1>
<p>Description of all the CLI tools</p>
<p>Automatically generated docummentation of all command line functions: <span class="xref std std-ref">auto_command_line</span></p>
<div class="section" id="calculators">
<h2>Calculators<a class="headerlink" href="#calculators" title="Permalink to this headline">¶</a></h2>
<p>You can perform DFT calculations on large sets of configurations with little effort within this workflow package. Currently ORCA, CASTEP and VASP are implemented. There are examples for these in the document, a few thoughts about the parallelism involved, and about how to contribute interfaces of other codes.</p>
<div class="section" id="orca-outdated">
<h3>ORCA (outdated)<a class="headerlink" href="#orca-outdated" title="Permalink to this headline">¶</a></h3>
<p>Use with <code class="docutils literal notranslate"><span class="pre">wfl</span> <span class="pre">ref-method</span> <span class="pre">orca-eval</span> <span class="pre">[...]</span></code></p>
<p>This is an advanced ORCA evaluator for radicals, using basin hopping in wavefunction space. However with appropriate settings, it behaves as a simple calculator doing one calculation per structure.</p>
<p>Note, that the calculations can benefit from having access to fast storage, for example SSD scratch drives. Specifying a fast scratch path in the <code class="docutils literal notranslate"><span class="pre">-tmp,</span> <span class="pre">--scratch-path</span></code> argument lets you use this, where temporary directories will be created and only saved (to cwd) if the calculations fail.</p>
<p>Example of setting for advanced calculation:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">wfl -v ref-method orca-eval -o frames_dft.xyz --scratch-path=&quot;/scratch/&quot; --orca-command=&quot;/path/to/orca&quot; \</span>
<span class="go">  -n 3 -p 32 --kw=&quot;n_hop=15&quot; structures_in.xyz</span>
</pre></div>
</div>
<p>Example of a single calculation per configuration:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">wfl -v ref-method orca-eval -o frames_dft.xyz --scratch-path=&quot;/scratch/&quot; --orca-command=&quot;/path/to/orca&quot; \</span>
<span class="go">  -n 1 -p 32 --kw=&quot;n_hop=1&quot; structures_in.xyz</span>
</pre></div>
</div>
<p>This calculator needs you to explicitly set the number of processes to use, serial ORCA calculations are used, unless you specify in the appropriate block.</p>
<p>full help:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> wfl ref-method orca-eval --help
<span class="go">Usage: wfl ref-method orca-eval [OPTIONS] [INPUTS]...</span>

<span class="go">Options:</span>
<span class="go">  --output-file TEXT             [required]</span>
<span class="go">  --output-all-or-none</span>
<span class="go">  --output-prefix TEXT           prefix in info/arrays for results</span>
<span class="go">  --base-rundir TEXT             directory to put all calculation directories</span>
<span class="go">                                 into</span>

<span class="go">  --directory-prefix TEXT</span>
<span class="go">  --calc-kwargs, --kw TEXT       Kwargs for calculation, overwritten by other</span>
<span class="go">                                 options</span>

<span class="go">  --keep-files TEXT              How much of files to keep, default is NOMAD</span>
<span class="go">                               compatible subset</span>

<span class="go">  --orca-command TEXT            path to ORCA executable, default=`orca`</span>
<span class="go">  -tmp, --scratch-path TEXT      Directory to use as scratch for calculations,</span>
<span class="go">                                 SSD recommended, default: cwd</span>

<span class="go">  -nr, --n-run INTEGER           Number of global optimisation runs for each</span>
<span class="go">                                 frame  [required]</span>

<span class="go">  -nh, --n-hop INTEGER           Number of hopping steps to take per run</span>
<span class="go">                               [required]</span>

<span class="go">  --orca-simple-input TEXT       orca simple input line, make sure it is</span>
<span class="go">                                 correct, default is recPBE with settings</span>
<span class="go">                                 tested for radicals</span>

<span class="go">  --orca-additional-blocks TEXT  orca blocks to be added, default is None</span>
<span class="go">  --help                         Show this message and exit.</span>
</pre></div>
</div>
</div>
<div class="section" id="castep">
<h3>CASTEP<a class="headerlink" href="#castep" title="Permalink to this headline">¶</a></h3>
<p>The CASTEP calculator wrapper can perform simple energy, force and stress calculations.</p>
<p>The default settings can be simply used with:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">wfl ref-method castep-eval --output-file structures_dft.xyz properties=&quot;energy forces stress&quot; structures_in.xyz</span>
</pre></div>
</div>
<p>Including some settings to the calculator:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">wfl ref-method castep-eval --output-file structures_dft.xyz properties=&quot;energy forces stress&quot; \</span>
<span class="go">  --castep-kwargs=&quot;ecut=500 xc=pbesol&quot; structures_in.xyz</span>
</pre></div>
</div>
<p>Full help</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> wfl ref-method castep-eval --help
<span class="go">Usage: wfl ref-method castep-eval [OPTIONS] [INPUTS]...</span>

<span class="go">Options:</span>
<span class="go">  --output-file TEXT       [required]</span>
<span class="go">  --output-all-or-none</span>
<span class="go">  --output-prefix TEXT     prefix in info/arrays for results</span>
<span class="go">  --base-rundir TEXT       directory to put all calculation directories into</span>
<span class="go">  --directory-prefix TEXT</span>
<span class="go">  --pp-path TEXT           PseudoPotentials path</span>
<span class="go">  --properties TEXT        properties to calculate, string is split</span>
<span class="go">  --castep-command TEXT    command, including appropriate mpirun</span>
<span class="go">  --castep-kwargs TEXT     CASTEP keywords, passed as dict</span>
<span class="go">  --keep-files TEXT        How much of files to keep, default is NOMAD</span>
<span class="go">                           compatible subset</span>

<span class="go">  --help                   Show this message and exit.</span>
</pre></div>
</div>
</div>
<div class="section" id="vasp">
<h3>VASP<a class="headerlink" href="#vasp" title="Permalink to this headline">¶</a></h3>
<p>The VASP Calculator wrapper is based on ASE’s <code class="docutils literal notranslate"><span class="pre">Vasp2</span></code>, and can do energy, force, and stress calculations.  The command will come from the <code class="docutils literal notranslate"><span class="pre">VASP_COMMAND</span></code> (<code class="docutils literal notranslate"><span class="pre">VASP_COMMAND_GAMMA</span></code> for input configs with <code class="docutils literal notranslate"><span class="pre">Atoms.pbc</span> <span class="pre">==</span> <span class="pre">[False]</span> <span class="pre">*</span> <span class="pre">3</span></code>) unless the <code class="docutils literal notranslate"><span class="pre">--vasp-command</span></code> argument is passed.</p>
<p>The default way for it to find PAWs is somewhat different from the normal behavior for <code class="docutils literal notranslate"><span class="pre">Vasp2</span></code>. The normal way is the <code class="docutils literal notranslate"><span class="pre">VASP_PP_PATH</span></code> environment variable, followed by a subdirectory which depends on XC functional. The argument <code class="docutils literal notranslate"><span class="pre">--potcar-top-dir</span></code> overrides <code class="docutils literal notranslate"><span class="pre">VASP_PP_PATH</span></code> if specified. The subdirectory defaults to <code class="docutils literal notranslate"><span class="pre">.</span></code>, unless overridden by the <code class="docutils literal notranslate"><span class="pre">--potcar-rel-dir</span></code>, instead of using the normal XC-dependent heuristic.  The PAW for each element is normally found in <code class="docutils literal notranslate"><span class="pre">&lt;chem_symbol&gt;/POTCAR</span></code> below whatever directory is chosen (the <code class="docutils literal notranslate"><span class="pre">setups</span></code> keyword argument can contain a dict that sets a suffix to the <code class="docutils literal notranslate"><span class="pre">&lt;chem_symbol&gt;</span></code> (e.g. <code class="docutils literal notranslate"><span class="pre">_pv</span></code> for p-electrons in valence) for each atomic number or chemical symbol key, but there is no interface to pass such a dict yet).</p>
<p>The simplest way to use it is by using parameters from VASP’s normal input files:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">wfl ref-method vasp-eval --output-file structures_dft.xyz --incar INCAR --kpoints KPOINTS structures_in.xyz</span>
</pre></div>
</div>
<p>Particular keywords can be set (or override those read from INCAR), lile</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">wfl ref-method vasp-eval --output-file structures_dft.xyz --incar INCAR --incar-dict &quot;encut=500&quot; \</span>
<span class="go">    --kpoints KPOINTS structures_in.xyz</span>
</pre></div>
</div>
<p>Full help (keyword help messages coming soon)</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> wfl ref-method vasp-eval --help
<span class="go">Usage: wfl ref-method vasp-eval [OPTIONS] [INPUTS]...</span>

<span class="go">Options:</span>
<span class="go">  --output-file TEXT     [required]</span>
<span class="go">  --output-all-or-none</span>
<span class="go">  --base-rundir TEXT</span>
<span class="go">  --output-prefix TEXT</span>
<span class="go">  --properties TEXT</span>
<span class="go">  --incar TEXT</span>
<span class="go">  --kpoints TEXT</span>
<span class="go">  --incar-dict TEXT</span>
<span class="go">  --potcar-top-dir TEXT</span>
<span class="go">  --potcar-rel-dir TEXT</span>
<span class="go">  --vasp-command TEXT</span>
<span class="go">  --help                 Show this message and exit.</span>
</pre></div>
</div>
<div class="toctree-wrapper compound">
</div>
</div>
</div>
</div>


              </div>
              
            
                <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="workflows.collisions.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Collisions</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="command_line.automatic_docs.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">&lt;no title&gt;</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            
        </div>
    </div>
    <footer class="footer">
  <p>
    
      By N. Bernstein, T. K. Stenczel, E. Gelzinyte<br/>
    
        &copy; Copyright .<br/>
  </p>
</footer>
</main>


      </div>
    </div>
  
  <script src="_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>